(()=>{"use strict";const t=document.querySelectorAll("picture source[data-srcset],img[data-src]");const e=new IntersectionObserver((function(t,e){t.forEach((t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"));n.parentNode.querySelectorAll("source[data-srcset]").forEach((t=>{t.srcset=t.dataset.srcset,t.removeAttribute("data-srcset")})),e.unobserve(n)}}))}),{rootMargin:"0px 0px 100px 0px"});t.forEach((t=>{e.observe(t)}));const n=document.querySelectorAll(".section-reviews__items");n&&n.forEach((t=>{let e=null,n=null;t.querySelectorAll(".actions-reviews__items").forEach((t=>{t.addEventListener("click",(function(){const r=t.querySelector(".actions-reviews__num"),c=parseInt(r.textContent,10);if(e&&e!==t){e.querySelector(".actions-reviews__num").textContent=n,e.classList.remove("active")}t.classList.contains("active")?(t.classList.remove("active"),r.textContent=c-1,e=null,n=null):(t.classList.add("active"),r.textContent=c+1,e=t,n=c)}))}))}));const r=new Date;document.querySelectorAll(".current-date").forEach((t=>{const e=parseInt(t.getAttribute("data-value"),10),n=function(t,e){const n=new Date(t);return n.setDate(n.getDate()-e),n}(r,e),c=`${String(n.getDate()).padStart(2,"0")}.${String(n.getMonth()+1).padStart(2,"0")}.${n.getFullYear()}`;t.textContent=c}));const c=document.querySelectorAll(".current-num");c&&c.forEach((t=>{let e=parseInt(t.textContent,10);const n=parseInt(t.getAttribute("data-num"),10);function r(t){return t>=1e3?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):t.toString()}function c(){e<n&&(e+=1,t.textContent=r(e))}t.textContent=r(e);const o=Math.floor(5e3*Math.random())+1e3;setTimeout((()=>{setInterval(c,1500)}),o)}));const o=document.querySelectorAll(".panel__item--btn");o&&o.forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest(".panel__item");if(e){const t=e.querySelector(".current-num");if(t){let e=parseInt(t.textContent.replace(/\s+/g,""),10);e<parseInt(t.getAttribute("data-num"),10)&&(e+=1,t.textContent=function(t){if(t>=1e3)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");return t.toString()}(e))}e.classList.toggle("active")}}))}));const s=document.querySelectorAll(".aside__item"),a=document.querySelector(".current-all"),i=s.length;a.textContent=i;const l=document.querySelectorAll(".aside__item"),u=document.querySelectorAll("section");l.length>0&&u.length>0&&(l.forEach((t=>{t.addEventListener("click",(function(){l.forEach((t=>t.classList.remove("active"))),this.classList.add("active")}))})),document.addEventListener("scroll",(function(){window.innerWidth>991.98&&u.forEach(((t,e)=>{const n=t.getBoundingClientRect();n.top<=50&&n.bottom>=50?l[e].classList.add("active"):l[e].classList.remove("active")}))})));const d=document.querySelectorAll(".phone");d.forEach(((t,e)=>{const n=window.intlTelInput(t,{separateDialCode:!0,preferredCountries:["kz","ru"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.js"});function r(t){var e=n.getSelectedCountryData();if(e){var r=e.iso2,c=document.createElement("p");c.className="country-code",c.textContent=r;var o=t.closest(".iti").querySelector(".country-code");o&&o.remove();var s=t.closest(".iti").querySelector(".iti__selected-flag");s&&s.appendChild(c)}}function c(t){var e=n.getSelectedCountryData().iso2;d.forEach((n=>{n!==t&&(window.intlTelInputGlobals.getInstance(n).setCountry(e),r(n))}))}r(t),t.addEventListener("countrychange",(function(){r(t),c(t)})),fetch("https://ipapi.co/json/").then((t=>t.json())).then((e=>{var o=e.country.toLowerCase();n.setCountry(o),r(t),c(t)})).catch((t=>{console.error("Ошибка при определении страны пользователя:",t)}))}))})();